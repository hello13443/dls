<!-- ðŸŸ¡ Only the changed/added sections are commented to keep the file compact -->
<!DOCTYPE html>
<html lang="en">
Â  <head>
Â  Â  <meta charset="UTF-8" />
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  Â  <title>Add Bet Match</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css" rel="stylesheet">
Â  Â  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
Â  Â  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
Â  </head>
Â  <body class="bg-gray-100 min-h-screen">

Â  Â  <!-- ðŸ”µ Modal for Adding Bet Info -->
Â  Â  <div id="betModal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center">
Â  Â  Â  <div class="bg-white rounded-2xl p-6 w-full max-w-md">
Â  Â  Â  Â  <h3 class="text-lg font-bold mb-4">Add Bet Info</h3>
Â  Â  Â  Â  <form id="betForm" class="space-y-4">
Â  Â  Â  Â  Â  <input type="hidden" id="modalTaskId">
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label class="block mb-1 font-medium">Bet Title</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="modalBetTitle" class="w-full px-4 py-2 border rounded-lg" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label class="block mb-1 font-medium">Option 1</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="modalOption1" class="w-full px-4 py-2 border rounded-lg" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label class="block mb-1 font-medium">Option 2</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="modalOption2" class="w-full px-4 py-2 border rounded-lg" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label class="block mb-1 font-medium">Odds 1</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="modalOdds1" class="w-full px-4 py-2 border rounded-lg" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label class="block mb-1 font-medium">Odds 2</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="modalOdds2" class="w-full px-4 py-2 border rounded-lg" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="flex justify-end gap-2">
Â  Â  Â  Â  Â  Â  <button type="button" onclick="closeBetModal()" class="bg-gray-300 px-4 py-2 rounded-lg">Cancel</button>
Â  Â  Â  Â  Â  Â  <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded-lg">Save</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </form>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <!-- ðŸ” MATCH CARD LOOP: Add Bet Info button added inside -->
Â  Â  <script type="module">
Â  Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
Â  Â  Â  import {
Â  Â  Â  Â  getFirestore,
Â  Â  Â  Â  collection,
Â  Â  Â  Â  doc,
Â  Â  Â  Â  setDoc,
Â  Â  Â  Â  deleteDoc,
Â  Â  Â  Â  onSnapshot,
Â  Â  Â  Â  updateDoc
Â  Â  Â  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
Â  Â  Â  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  apiKey: "AIzaSyDooTNeDHoWUU9nLxYxyBIhewydt7Xl_M0",
Â  Â  Â  Â  authDomain: "dlstournament-31ac1.firebaseapp.com",
Â  Â  Â  Â  projectId: "dlstournament-31ac1",
Â  Â  Â  Â  storageBucket: "dlstournament-31ac1.appspot.com",
Â  Â  Â  Â  messagingSenderId: "874377019055",
Â  Â  Â  Â  appId: "1:874377019055:web:6e38db2ec7f0d541d2de5a"
Â  Â  Â  };

Â  Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  Â  const db = getFirestore(app);
Â  Â  Â  const auth = getAuth(app);

Â  Â  Â  const tasksCol = collection(db, "tasks");
Â  Â  Â  const tasksList = document.getElementById("matchList");

Â  Â  Â  // Modal references
Â  Â  Â  const modal = document.getElementById("betModal");
Â  Â  Â  const modalTaskId = document.getElementById("modalTaskId");
Â  Â  Â  const modalBetTitle = document.getElementById("modalBetTitle");
Â  Â  Â  const modalOption1 = document.getElementById("modalOption1");
Â  Â  Â  const modalOption2 = document.getElementById("modalOption2");
Â  Â  Â  const modalOdds1 = document.getElementById("modalOdds1");
Â  Â  Â  const modalOdds2 = document.getElementById("modalOdds2");

Â  Â  Â  function openBetModal(task) {
Â  Â  Â  Â  modalTaskId.value = task.id;
Â  Â  Â  Â  modalBetTitle.value = task.betTitle || "";
Â  Â  Â  Â  modalOption1.value = task.option1 || "";
Â  Â  Â  Â  modalOption2.value = task.option2 || "";
Â  Â  Â  Â  modalOdds1.value = task.odds1 || "";
Â  Â  Â  Â  modalOdds2.value = task.odds2 || "";
Â  Â  Â  Â  modal.classList.remove("hidden");
Â  Â  Â  }

Â  Â  Â  window.closeBetModal = function () {
Â  Â  Â  Â  modal.classList.add("hidden");
Â  Â  Â  }

Â  Â  Â  document.getElementById("betForm").addEventListener("submit", async (e) => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const id = modalTaskId.value;
Â  Â  Â  Â  const data = {
Â  Â  Â  Â  Â  betTitle: modalBetTitle.value.trim(),
Â  Â  Â  Â  Â  option1: modalOption1.value.trim(),
Â  Â  Â  Â  Â  option2: modalOption2.value.trim(),
Â  Â  Â  Â  Â  odds1: modalOdds1.value.trim(),
Â  Â  Â  Â  Â  odds2: modalOdds2.value.trim()
Â  Â  Â  Â  };

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  await updateDoc(doc(db, "tasks", id), data);
Â  Â  Â  Â  Â  showToast("Bet Info updated.");
Â  Â  Â  Â  Â  closeBetModal();
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  showToast("Error: " + error.message, "error");
Â  Â  Â  Â  }
Â  Â  Â  });

Â  Â  Â  function showToast(message, icon = "success") {
Â  Â  Â  Â  Swal.fire({
Â  Â  Â  Â  Â  toast: true,
Â  Â  Â  Â  Â  position: "top-end",
Â  Â  Â  Â  Â  showConfirmButton: false,
Â  Â  Â  Â  Â  timer: 3000,
Â  Â  Â  Â  Â  timerProgressBar: true,
Â  Â  Â  Â  Â  icon: icon,
Â  Â  Â  Â  Â  title: message,
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  onAuthStateChanged(auth, (user) => {
Â  Â  Â  Â  if (!user) {
Â  Â  Â  Â  Â  Swal.fire({
Â  Â  Â  Â  Â  Â  icon: "warning",
Â  Â  Â  Â  Â  Â  title: "Please log in first.",
Â  Â  Â  Â  Â  Â  confirmButtonText: "OK"
Â  Â  Â  Â  Â  }).then(() => {
Â  Â  Â  Â  Â  Â  window.location.href = "login.html";
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â  loadTasksRealtime();
Â  Â  Â  });

Â  Â  Â  function loadTasksRealtime() {
Â  Â  Â  Â  onSnapshot(tasksCol, (snapshot) => {
Â  Â  Â  Â  Â  tasksList.innerHTML = snapshot.empty
Â  Â  Â  Â  Â  Â  ? '<p class="text-center text-indigo-500 italic">No matches found.</p>'
Â  Â  Â  Â  Â  Â  : "";

Â  Â  Â  Â  Â  snapshot.forEach((docSnap) => {
Â  Â  Â  Â  Â  Â  const task = { id: docSnap.id, ...docSnap.data() };
Â  Â  Â  Â  Â  Â  const div = document.createElement("div");
Â  Â  Â  Â  Â  Â  div.className = "p-6 bg-white rounded-2xl shadow-lg flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4";

Â  Â  Â  Â  Â  Â  const info = document.createElement("div");
Â  Â  Â  Â  Â  Â  info.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  <p class="text-lg font-semibold text-indigo-700">${task.name}</p>
Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-600">${task.description || ""}</p>
Â  Â  Â  Â  Â  Â  Â  <p class="mt-2 text-indigo-600">Team One: ${task.reward}</p>
Â  Â  Â  Â  Â  Â  Â  ${task.view ? `<p>Team Two: ${task.view}</p>` : ""}
Â  Â  Â  Â  Â  Â  Â  ${task.betTitle ? `<p class="mt-2 font-medium text-gray-800">Bet Title: ${task.betTitle}</p>` : ""}
Â  Â  Â  Â  Â  Â  Â  ${task.option1 ? `<p>Option 1: ${task.option1} (Odds: ${task.odds1 || "-"})</p>` : ""}
Â  Â  Â  Â  Â  Â  Â  ${task.option2 ? `<p>Option 2: ${task.option2} (Odds: ${task.odds2 || "-"})</p>` : ""}
Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  const controls = document.createElement("div");
Â  Â  Â  Â  Â  Â  controls.className = "flex flex-wrap gap-2";

Â  Â  Â  Â  Â  Â  const editBtn = document.createElement("button");
Â  Â  Â  Â  Â  Â  editBtn.className = "bg-yellow-400 hover:bg-yellow-500 px-4 py-2 rounded-xl text-white";
Â  Â  Â  Â  Â  Â  editBtn.innerHTML = `<i class="fas fa-edit"></i> Edit`;
Â  Â  Â  Â  Â  Â  editBtn.onclick = () => {
Â  Â  Â  Â  Â  Â  Â  document.getElementById("taskId").value = task.id;
Â  Â  Â  Â  Â  Â  Â  document.getElementById("taskName").value = task.name;
Â  Â  Â  Â  Â  Â  Â  document.getElementById("taskDesc").value = task.description || "";
Â  Â  Â  Â  Â  Â  Â  document.getElementById("taskReward").value = task.reward;
Â  Â  Â  Â  Â  Â  Â  document.getElementById("taskView").value = task.view || "";
Â  Â  Â  Â  Â  Â  Â  document.getElementById("betTitle").value = task.betTitle || "";
Â  Â  Â  Â  Â  Â  Â  document.getElementById("option1").value = task.option1 || "";
Â  Â  Â  Â  Â  Â  Â  document.getElementById("option2").value = task.option2 || "";
Â  Â  Â  Â  Â  Â  Â  document.getElementById("odds1").value = task.odds1 || "";
Â  Â  Â  Â  Â  Â  Â  document.getElementById("odds2").value = task.odds2 || "";
Â  Â  Â  Â  Â  Â  Â  window.scrollTo({ top: 0, behavior: "smooth" });
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const betInfoBtn = document.createElement("button");
Â  Â  Â  Â  Â  Â  betInfoBtn.className = "bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-xl text-white";
Â  Â  Â  Â  Â  Â  betInfoBtn.innerHTML = `<i class="fas fa-plus"></i> Add Bet Info`;
Â  Â  Â  Â  Â  Â  betInfoBtn.onclick = () => openBetModal(task);

Â  Â  Â  Â  Â  Â  const deleteBtn = document.createElement("button");
Â  Â  Â  Â  Â  Â  deleteBtn.className = "bg-red-600 hover:bg-red-700 px-4 py-2 rounded-xl text-white";
Â  Â  Â  Â  Â  Â  deleteBtn.innerHTML = `<i class="fas fa-trash"></i> Delete`;
Â  Â  Â  Â  Â  Â  deleteBtn.onclick = async () => {
Â  Â  Â  Â  Â  Â  Â  if (confirm(`Delete match "${task.name}"?`)) {
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  await deleteDoc(doc(db, "tasks", task.id));
Â  Â  Â  Â  Â  Â  Â  Â  Â  showToast("Match deleted.");
Â  Â  Â  Â  Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  showToast("Error deleting: " + e.message, "error");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  controls.append(editBtn, betInfoBtn, deleteBtn);
Â  Â  Â  Â  Â  Â  div.append(info, controls);
Â  Â  Â  Â  Â  Â  tasksList.appendChild(div);
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });
Â  Â  Â  }
Â  Â  </script>
Â  </body>
</html>
