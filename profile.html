<!-- নিচের কোডটি সম্পূর্ণ HTML ফাইল -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Profile</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    .swal2-timer-progress-bar { background: #facc15 !important; }
    .glow-yellow { box-shadow: 0 0 8px rgba(234, 179, 8, 0.6); }
    .header-glow { box-shadow: 0 0 10px rgba(255, 255, 255, 0.1), 0 0 15px rgba(251, 191, 36, 0.3); }
    .loader {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 6px solid rgba(255, 255, 255, 0.15);
      border-top-color: #facc15;
      animation: spin 2s ease-in-out infinite;
      box-shadow: 0 0 8px #facc15, inset 0 0 8px #facc15;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="bg-black text-white">

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="fixed inset-0 bg-black flex items-center justify-center z-50">
    <div class="text-center">
      <div class="loader mx-auto mb-4"></div>
      <h1 class="text-2xl font-bold animate-pulse bg-gradient-to-r from-yellow-400 via-green-300 to-yellow-400 bg-clip-text text-transparent" style="font-family: 'Audiowide', cursive;">Khelo Dls</h1>
      <p class="text-gray-400 text-xs">Loading...</p>
    </div>
  </div>

  <!-- ... HEADER, MAIN, NAV (unchanged, same as your code) ... -->

  <!-- Firebase Scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDooTNeDHoWUU9nLxYxyBIhewydt7Xl_M0",
      authDomain: "dlstournament-31ac1.firebaseapp.com",
      projectId: "dlstournament-31ac1",
      storageBucket: "dlstournament-31ac1.appspot.com",
      messagingSenderId: "874377019055",
      appId: "1:874377019055:web:6e38db2ec7f0d541d2de5a"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    function hideLoader() {
      const loader = document.getElementById('loadingOverlay');
      if (loader) loader.style.display = 'none';
    }

    async function loadUserProfile(user) {
      try {
        const userRef = doc(db, "users", user.uid);
        const userSnap = await getDoc(userRef);

        if (userSnap.exists()) {
          const data = userSnap.data();
          document.getElementById("username").innerText = data.username || "No username";
          document.getElementById("email").innerText = data.email || user.email;
          document.getElementById("mainBalance").innerText = data.balance !== undefined ? data.balance : "0";
          document.getElementById("totalRefers").innerText = data.totalRefers || "0";
        } else {
          document.getElementById("username").innerText = "No username";
          document.getElementById("email").innerText = user.email;
        }

        const currentDomain = window.location.origin;
        const referralLink = `${currentDomain}/signup.html?ref=${user.uid}`;
        document.getElementById("referLink").value = referralLink;

        hideLoader();
      } catch (error) {
        console.error("Error loading user profile:", error);
        hideLoader();
      }
    }

    onAuthStateChanged(auth, (user) => {
      if (!user) return window.location.href = "login.html";
      loadUserProfile(user);
    });

    window.logout = async () => {
      await signOut(auth);
      window.location.href = "index.html";
    };

    window.copyReferLink = () => {
      const input = document.getElementById("referLink");
      navigator.clipboard.writeText(input.value).then(() => {
        Swal.fire({
          toast: true,
          position: 'top-end',
          icon: 'success',
          title: 'Referral link copied!',
          showConfirmButton: false,
          timer: 2000,
          timerProgressBar: true,
          background: '#1a202c',
          color: '#fff'
        });
      });
    };
  </script>
</body>
</html>
